\section{Examples}
\label{sec:examples}
\subsection{Hello world! server}
Figure \ref{fig:HelloWorldImpl} shows the Implementation of the Hello World!
server described in section \ref{sec:helloWorld}.
It's a direct translation of the diagram shown in Figure \ref{fig:helloWorld}.

The Listener corresponds to the call of \texttt{mpserver.Listen} function.
Hello world Component translates into an instance of \texttt{ConstantComponent}
and String Writer is the writer in the package with the same name.
We plug these together using two channels, start the component and writer 
and then start the server itself.

\begin{figure}[h]
\centering
\lstinputlisting{../examples/helloServer/helloServer.go}
\caption[scale=1.0]{Implementation of the Hello World! server.}
\label{fig:HelloWorldImpl}
\end{figure}

\newpage
\subsection{File server}
Figure \ref{fig:FileServerImpl} shows the implementation of a simple 
file server that compresses all '.go' files. It is almost a direct translation
of the diagram shown in figure \ref{fig:fileServer2} in section \ref{sec:fileServer}.
However, here the File Getter is composed of two parts, which are \texttt{PathMaker}
and \texttt{FileComponent}. The \texttt{PathMaker} firstly strips a given
prefix from the request path and then prepends a provided directory name to 
the result. The \texttt{FileComponent} tries to open a file at a path 
provided in the result field of the incoming value. Other modifications
are the addition of the \texttt{ErrorWriter} and the channel going to it from
the \texttt{Splitter}.
This path is used when a non existent file is requested by the client.
Otherwise '.go' files goes to the \texttt{GzipWriter} and all other files to 
the standard \texttt{FileWriter}.
The diagram that represents this server is shown in 
Figure \ref{fig:fileServer3}.

\begin{figure}[h]
\centering
\begin{tikzpicture}[node distance = 2cm, auto]
    % Nodes
    \node [listener] (listener) {Listener};
    \node [component, right of=listener, node distance=3cm] (maker) {Path Maker};
    \node [component, right of=maker, node distance=3cm] (comp) {File Component};
    \node [component, right of=comp, node distance=3cm] (splitter) {Splitter};
    \node [writer, right of=splitter, node distance=3cm] (fwriter) {File Writer};
    \node [writer, below of=fwriter] (gwriter) {Gzip Writer};
     \node [writer, below of=gwriter] (ewriter) {Error Writer};
    % Edges
    \path [line] (listener) -- (maker);
    \path [line] (maker) -- (comp);
    \path [line] (comp) -- (splitter);
    \path [line] (splitter) -- (fwriter);
    \path [line] (splitter) |- (gwriter);
    \path [line] (splitter) |- (ewriter);
\end{tikzpicture}
\caption[scale=1.0]{File server with compression and error handling.}
\label{fig:fileServer3}
\end{figure}

\begin{figure}
\lstinputlisting{../examples/fileServer/fileServer.go}
\caption[scale=1.0]{Implementation of a File Server that compresses go files.}
\label{fig:FileServerImpl}
\end{figure}

\newpage
\subsection{Proxy server}
\begin{figure}[h]
\lstinputlisting{../examples/proxyServer/proxyServer.go}
\caption[scale=1.0]{Implementation of a simple proxy server with caching.}
\label{fig:FileServerImpl}
\end{figure}
